<div class="event-finder">
  {% for event in Events %} {% assign ds = event.DateSummary %} {% assign
  occ_total = ds.TotalOccurrences | default: 0 %} {%- comment -%} Card image:
  event.Image (from SQL overrides) → Information.Default16x9Image → local asset
  {%- endcomment -%} {% assign hero = event.Image | default:
  Information.Default16x9Image | default:
  '/CustomWidgets/EventFinder/Assets/W_16x9.png' %}

  <div class="event-card">
    <div class="event-image" style="background-image:url('{{ hero }}');"></div>

    <div class="event-content">
      {% if event.Title %}
      <div class="event-title">{{ event.Title }}</div>
      {% endif %}
      <div class="event-meta">
        <i class="fas fa-calendar-alt"></i>
        <div>
          {% if ds.HasMultipleTimesOnFirstDate %} {{ ds.FirstStart | date: "%A,
          %B %-d" }} {% else %} {{ ds.FirstStart | date: "%A, %B %-d at
          %-I:%M%p" }} {% if ds.FirstEnd %}&ndash; {{ ds.FirstEnd | date:
          "%-I:%M%p" }}{% endif %} {% endif %}
        </div>

        {% if event.Campus and event.Campus.Name %}
        <i class="fas fa-place-of-worship" aria-hidden="true"></i>
        <div>{{ event.Campus.Name }}</div>
        {% endif %} {% if event.Location and event.Location.Name %}
        <i class="fas fa-map-marker-alt"></i>
        <div>{{ event.Location.Name }}</div>
        {% endif %}
      </div>

      {% if event.Description %}
      <div class="event-description clamp-5">{{ event.Description }}</div>
      {% endif %}
    </div>

    {% if event.Buttons and event.Buttons.size > 0 %}
    <div class="event-buttons">
      {% for button in event.Buttons %}
      <a href="{{ button.URL }}">{{ button.Text }}</a>
      {% endfor %}
    </div>
    {% endif %} {% if event.Dates and event.Dates.size > 0 and occ_total > 1 %}
    <details class="event-dates">
      <summary>See all {{ occ_total }} dates</summary>

      {% for d in event.Dates %} {% assign localDate = d.Date | append:
      "T12:00:00" %}
      <h4 class="event-date-heading">
        <i class="fas fa-calendar-alt"></i>{{ localDate | date: "%a, %b %-d, %Y"
        }}
      </h4>
      <ul>
        {% for o in d.Occurrences %}
        <li class="event-date-row">
          {% if o.Title %}
          <h5 class="occ-title">{{ o.Title }}</h5>
          {% endif %}

          <div class="event-date-row__when">
            {% if o.Campus and o.Campus.Name %}
            <i class="fas fa-place-of-worship" aria-hidden="true"></i>
            <div class="occ-campus">{{ o.Campus.Name }}</div>
            {% endif %}

            <i class="fas fa-clock" aria-hidden="true"></i>
            <div class="occ-time">
              {{ o.Start | date: "%-I:%M%p" }}{% if o.End %} – {{ o.End | date:
              "%-I:%M%p" }}{% endif %}
            </div>

            {% if o.Location and o.Location.Address %} {% assign addr =
            o.Location.Address %}
            <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
            <div class="occ-address">{{ event.Location.Name }}</div>
            {% endif %}
          </div>

          <div class="event-date-row__actions">
            {% for button in o.Buttons %}
            <a class="btn" href="{{ button.URL }}">{{ button.Text }}</a>
            {% endfor %}
          </div>
        </li>
        {% endfor %}
      </ul>
      {% endfor %}
    </details>
    {% endif %}
  </div>
  {% endfor %}
</div>
